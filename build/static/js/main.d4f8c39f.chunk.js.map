{"version":3,"sources":["components/PriceList.js","utility.js","components/TotalPrice.js","components/MonthPicker.js","components/CreateBtn.js","logo.svg","components/Tabs.js","WithContext.js","components/PieChart.js","components/loader.js","containers/Home.js","components/CategorySelect.js","components/PriceForm.js","containers/Create.js","App.js","index.js"],"names":["PriceList","items","onModifyItem","onDeleteItem","className","map","item","fontSize","style","backgroundColor","padding","color","icon","category","iconName","title","type","price","date","onClick","cursor","id","defaultProps","LIST_VIEW","CHART_VIEW","TYPE_INCOME","TYPE_OUTCOME","padLeft","n","range","size","startAt","arr","i","getState","defaultNum","selectNum","parseToYearAndMonth","str","Date","year","getFullYear","month","getMonth","isValidDate","dateString","match","d","Number","isNaN","getTime","toISOString","slice","Colors","flatternArr","reduce","TotalPrice","income","outcome","MonthPicker","props","documentClickHandler","e","currentClick","target","monthPickerRef","current","contains","setState","isOpen","state","selectedYear","React","createRef","document","addEventListener","this","removeEventListener","event","preventDefault","yearNumber","monthNumber","onChange","monthRange","yearRange","number","ref","fontWeight","marginRight","toggleDropdown","display","index","href","selectYear","selectMonth","PureComponent","CreateBtn","Tabs","activeIndex","tabChange","onTabChange","children","Children","child","activeClassName","Tab","Fragment","withContext","Component","AppContext","Consumer","actions","data","CustomPieChart","drawPieChart","categoryData","option","tooltip","legend","series","name","radius","center","Echarts","PieChartRef","setOption","width","height","length","marginLeft","Loader","rotate","tabsText","generateChartDataByCategory","categoryMap","filter","forEach","cid","value","push","Object","keys","mapKey","Home","tabView","changeView","changeDate","selectNewMonth","createItem","history","modifyItem","modifiedItem","deleteItem","deletedItem","getInitalData","categories","currentDate","isLoading","itemsWithCategory","totalIncome","totalOutcome","chartOutcomDataByCategory","chartIncomDataByCategory","src","logo","alt","withRouter","CategorySelect","selectCategory","onSelectCategory","selectedCategory","selectedCategoryId","iconColor","backColor","PriceForm","validatePass","errorMessage","sumbitForm","onFormSubmit","editMode","priceInput","trim","dateInput","titleInput","onSubmit","noValidate","htmlFor","placeholder","defaultValue","input","onCancelSubmit","role","Create","selectedTab","cancelSubmit","submitForm","isEditMode","updateItem","then","params","getEditData","editItem","filterCategories","tabIndex","findIndex","text","background","createContext","App","withLoading","cb","a","getUrlWithData","Promise","all","axios","get","results","promiseArr","itemAlreadyFetched","indexOf","getURKWithID","fecthedCategories","finalCategories","finalItem","delete","newItems","JSON","parse","stringify","categoryId","newId","Math","random","toString","substr","parseDate","monthCategory","timestamp","post","newItem","updatedCategoryId","updateData","put","modifedItem","Provider","path","exact","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"8VAIMA,EAAY,SAAC,GAA2C,IAAzCC,EAAwC,EAAxCA,MAAOC,EAAiC,EAAjCA,aAAcC,EAAmB,EAAnBA,aACxC,OACE,oBAAIC,UAAU,8BAAd,SACGH,EAAMI,KAAI,SAACC,GAAD,OACT,qBACEF,UAAU,oEADZ,UAIE,sBAAMA,UAAU,QAAhB,SACE,cAAC,IAAD,CACEA,UAAU,iBACVG,SAAS,OACTC,MAAO,CAACC,gBAAiB,UAAWC,QAAS,OAC7CC,MAAO,OACPC,KAAMN,EAAKO,SAASC,aAGxB,sBAAMV,UAAU,QAAhB,SAAyBE,EAAKS,QAC9B,uBAAMX,UAAU,yBAAhB,UAC0B,WAAvBE,EAAKO,SAASG,KAAoB,IAAM,IACxCV,EAAKW,MAFR,YAIA,sBAAMb,UAAU,QAAhB,SAAyBE,EAAKY,OAC9B,mBACEd,UAAU,QACVe,QAAS,WACPjB,EAAaI,IAHjB,SAME,cAAC,IAAD,CACEF,UAAU,iBACVG,SAAS,OACTC,MAAO,CAACC,gBAAiB,UAAWC,QAAS,MAAOU,OAAO,WAC3DT,MAAO,OACPC,KAAM,yBAGV,mBACER,UAAU,QACVe,QAAS,WACPhB,EAAaG,IAHjB,SAME,cAAC,IAAD,CACEF,UAAU,iBACVG,SAAS,OACTC,MAAO,CAACC,gBAAiB,UAAWC,QAAS,MAAMU,OAAO,WAC1DT,MAAO,OACPC,KAAM,kBA1CLN,EAAKe,UAuDpBrB,EAAUsB,aAAe,CACvBnB,aAAc,aACdD,aAAc,cAEDF,QCrEFuB,EAAY,OACZC,EAAa,QACbC,EAAc,SACdC,EAAe,UAEfC,EAAU,SAACC,GACtB,OAAOA,EAAI,GAAK,IAAMA,EAAIA,GAEfC,EAAQ,SAACC,GAEpB,IAF2C,IAAjBC,EAAgB,uDAAN,EAC9BC,EAAM,GACHC,EAAI,EAAGA,EAAIH,EAAMG,IACxBD,EAAIC,GAAKF,EAAUE,EAErB,OAAOD,GAEIE,EAAW,SAACC,EAAYC,GACnC,OAAOD,IAAeC,EAAY,uBAAyB,iBAEhDC,EAAsB,SAACC,GAClC,IAAMpB,EAAOoB,EAAM,IAAIC,KAAKD,GAAO,IAAIC,KACvC,MAAO,CACLC,KAAMtB,EAAKuB,cACXC,MAAOxB,EAAKyB,WAAa,IAGhBC,EAAc,SAACC,GAE1B,IAAIA,EAAWC,MADD,uBACe,OAAO,EACpC,IAAMC,EAAI,IAAIR,KAAKM,GACnB,OAAGG,OAAOC,MAAMF,EAAEG,YACXH,EAAEI,cAAcC,MAAM,EAAE,MAAQP,GAE5BQ,EACL,UADKA,EAKL,OALKA,EAMA,UANAA,EAOJ,OAEIC,EAAc,SAACtB,GAC1B,OAAOA,EAAIuB,QAAO,SAAClD,EAAKC,GAEtB,OADAD,EAAIC,EAAKe,IAAMf,EACRD,IACN,KC1CCmD,EAAa,SAAC,GAAD,IAAGC,EAAH,EAAGA,OAAQC,EAAX,EAAWA,QAAX,OACjB,sBAAKtD,UAAU,MAAf,UACE,qBAAKA,UAAU,MAAf,SACE,qBAAIA,UAAU,SAAd,+BACK,iCAAOqD,EAAP,iBAGP,qBAAKrD,UAAU,MAAf,SACE,qBAAIA,UAAU,UAAd,+BACK,iCAAOsD,EAAP,qBAUXF,EAAWlC,aAAe,CACxBmC,OAAQ,EACRC,QAAS,GAEIF,QCkFAG,E,kDAvGb,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAORC,qBAAuB,SAACC,GAEtB,IAAMC,EAAeD,EAAEE,QACH,EAAKC,eAAeC,QACfC,SAASJ,IAEzB,EAAKK,SAAS,CAAEC,QAAQ,KAZjC,EAAKC,MAAQ,CACXD,QAAQ,EACRE,aAAcX,EAAMpB,MAEtB,EAAKyB,eAAiBO,IAAMC,YANX,E,gEAmBjBC,SAASC,iBAAiB,QAASC,KAAKf,sBAAsB,K,6CAG9Da,SAASG,oBAAoB,QAASD,KAAKf,sBAAsB,K,qCAEpDiB,GACbA,EAAMC,iBACNH,KAAKR,SAAS,CACZC,QAASO,KAAKN,MAAMD,OACpBE,aAAcK,KAAKhB,MAAMpB,S,iCAGlBsC,EAAOE,GAChBF,EAAMC,iBACNH,KAAKR,SAAS,CACZG,aAAcS,M,kCAGNF,EAAOG,GACjBH,EAAMC,iBACNH,KAAKR,SAAS,CACZC,QAAQ,IAEVO,KAAKhB,MAAMsB,SAASN,KAAKN,MAAMC,aAAcU,K,+BAErC,IAAD,SACiBL,KAAKhB,MAArBpB,EADD,EACCA,KAAME,EADP,EACOA,MADP,EAE0BkC,KAAKN,MAA9BD,EAFD,EAECA,OAAQE,EAFT,EAESA,aACVY,EAAatD,EAAM,GAAI,GACvBuD,EAAYvD,EAAM,GAAI,GAAGxB,KAAI,SAACgF,GAAD,OAAYA,EAAS7C,KACxD,OACE,sBACEpC,UAAU,kCACVkF,IAAKV,KAAKX,eAFZ,UAIE,sBAAMzD,MAAO,CAACD,SAAS,OAAQgF,WAAY,IAAKC,YAAa,QAA7D,wCACA,wBACEpF,UAAU,qCACVe,QAAS,SAAC2C,GACR,EAAK2B,eAAe3B,IAHxB,mBAMMtB,EANN,kBAMeb,EAAQe,GANvB,YASC2B,GACC,qBAAKjE,UAAU,gBAAgBI,MAAO,CAAEkF,QAAS,SAAjD,SACE,sBAAKtF,UAAU,MAAf,UACE,qBAAKA,UAAU,+BAAf,SACGgF,EAAU/E,KAAI,SAAC2E,EAAYW,GAAb,OACb,oBAEEC,KAAK,IACLxF,UAAW8B,EAAS8C,EAAYT,GAChCpD,QAAS,SAAC2D,GAAD,OAAW,EAAKe,WAAWf,EAAOE,IAJ7C,UAMGA,EANH,YACOW,QASX,qBAAKvF,UAAU,mBAAf,SACG+E,EAAW9E,KAAI,SAAC4E,EAAaU,GAAd,OACd,oBACExE,QAAS,SAAC2D,GAAD,OAAW,EAAKgB,YAAYhB,EAAOG,IAE5CW,KAAK,IACLxF,UAAW8B,EAAS+C,EAAavC,GAJnC,UAMGf,EAAQsD,GANX,YAEOU,oB,GApFCI,iBCkBXC,EAlBG,SAAC,GAAD,IAAG7E,EAAH,EAAGA,QAAH,OAChB,yBACEf,UAAU,6EACVe,QAAS,SAAC2C,GAAO3C,KAFnB,UAIE,cAAC,IAAD,CACEf,UAAU,iBACVG,SAAS,OACTI,MAAM,OACNC,KAAK,mBART,mECLa,MAA0B,iCCG5BqF,EAAb,4MAKE3B,MAAQ,CACN4B,YAAa,EAAKtC,MAAMsC,aAN5B,EAQEC,UAAY,SAACrB,EAAOa,GAClBb,EAAMC,iBACN,EAAKX,SAAS,CACZ8B,YAAaP,IAEf,EAAK/B,MAAMwC,YAAYT,IAb3B,uDAeY,IAAD,OACCU,EAAazB,KAAKhB,MAAlByC,SACAH,EAAgBtB,KAAKN,MAArB4B,YACR,OACE,8BACE,oBAAI9F,UAAU,6BAAd,SACGoE,IAAM8B,SAASjG,IAAIgG,GAAU,SAACE,EAAOZ,GACpC,IAAMa,EACJN,IAAgBP,EAAQ,kBAAoB,WAC9C,OACE,oBAAIvF,UAAU,WAAd,SACE,mBACEwF,KAAK,IACLxF,UAAWoG,EACXrF,QAAS,SAAC2D,GAAD,OAAW,EAAKqB,UAAUrB,EAAOa,IAH5C,SAKGY,iBA/BnB,GAA0BR,iBA0CbU,EAAM,SAAC,GAAD,IAAGJ,EAAH,EAAGA,SAAH,OAAkB,cAAC,IAAMK,SAAP,UAAiBL,KClCvCM,EATK,SAACC,GACnB,OAAO,SAAChD,GAAD,OACL,cAACiD,GAAWC,SAAZ,UACG,YAAyB,IAAtBxC,EAAqB,EAArBA,MAAOyC,EAAc,EAAdA,QACT,OAAO,cAACH,EAAD,2BAAehD,GAAf,IAAsBoD,KAAM1C,EAAOyC,QAASA,U,SCFtCE,E,4MAgCnBC,aAAe,WAAO,IAAD,EACa,EAAKtD,MAA7BuD,EADW,EACXA,aAIFC,EAAS,CACbC,QAAS,GACTC,OAAQ,GACRC,OAAQ,CACN,CACEC,KAVa,EACGzG,MAUhBC,KAAM,MACNyG,OAAQ,CAAC,GAAI,KACbC,OAAQ,CAAC,MAAO,OAEhBV,KAAMG,KAZIQ,IAAa,EAAKC,aAkB1BC,UAAUT,I,uDApDV,IAAD,SACwCxC,KAAKhB,MAA5C7C,EADD,EACCA,MAAOoG,EADR,EACQA,aAAcW,EADtB,EACsBA,MAAOC,EAD7B,EAC6BA,OAEpC,OAA4B,IAAxBZ,EAAaa,OACR,qBAAI5H,UAAU,mBAAd,cAAmCW,EAAnC,iDAGP,sBAAKX,UAAU,sBAAf,UACE,oBAAIA,UAAU,mBAAd,SAAkCW,IAClC,qBAAKX,UAAU,YAAYI,MAAO,CAAEsH,QAAOC,SAAOE,WAAY,OAAQzC,YAAY,QAASF,IAAK,SAACA,GAAD,OAAS,EAAKsC,YAActC,U,0CAkBpG,IADHV,KAAKhB,MAAtBuD,aACSa,QACfpD,KAAKsC,mB,GA7BiCnB,iBAAvBkB,EAoBZ3F,aAAe,CACpBP,MAAO,GACPoG,aAAc,GACdW,MAAO,IACPC,OAAQ,KCxBZ,IAWeG,EAXA,kBACb,sBAAK9H,UAAU,gCAAf,UACE,cAAC,IAAD,CACEQ,KAAK,cACLL,SAAS,OACTI,MAAO0C,EACP8E,QAAQ,IAEV,2DCCEC,EAAW,CAAC7G,EAAWC,GACvB6G,EAA8B,SAACpI,GAA+B,IAAxBe,EAAuB,uDAAhBS,EAC7C6G,EAAc,GAelB,OAdArI,EACGsI,QAAO,SAACjI,GAAD,OAAUA,EAAKO,SAASG,OAASA,KACxCwH,SAAQ,SAAClI,GACJgI,EAAYhI,EAAKmI,MACnBH,EAAYhI,EAAKmI,KAAKC,OAAsB,EAAbpI,EAAKW,MACpCqH,EAAYhI,EAAKmI,KAAKxI,MAAM0I,KAAKrI,EAAKe,KAEtCiH,EAAYhI,EAAKmI,KAAO,CACtBjB,KAAMlH,EAAKO,SAAS2G,KACpBkB,MAAoB,EAAbpI,EAAKW,MACZhB,MAAO,CAACK,EAAKe,QAIduH,OAAOC,KAAKP,GAAajI,KAAI,SAACyI,GAAD,sBAAkBR,EAAYQ,QAEvDC,EAAb,4MACEzE,MAAQ,CACN0E,QAASzH,GAFb,EAOE0H,WAAa,SAACtD,GACZ,EAAKvB,SAAS,CAAE4E,QAASZ,EAASzC,MARtC,EAUEuD,WAAa,SAAC1G,EAAME,GAClB,EAAKkB,MAAMmD,QAAQoC,eAAe3G,EAAME,IAX5C,EAaE0G,WAAa,WACX,EAAKxF,MAAMyF,QAAQV,KAAK,YAd5B,EAgBEW,WAAa,SAACC,GACZ,EAAK3F,MAAMyF,QAAQV,KAAnB,gBAAiCY,EAAalI,MAjBlD,EAmBEmI,WAAa,SAACC,GACZ,EAAK7F,MAAMmD,QAAQyC,WAAWC,IApBlC,kEAKI7E,KAAKhB,MAAMmD,QAAQ2C,kBALvB,+BAuBY,IACA1C,EAASpC,KAAKhB,MAAdoD,KACA/G,EAA8C+G,EAA9C/G,MAAO0J,EAAuC3C,EAAvC2C,WAAYC,EAA2B5C,EAA3B4C,YAAaC,EAAc7C,EAAd6C,UAChCb,EAAYpE,KAAKN,MAAjB0E,QAEFc,EAAoBlB,OAAOC,KAAK5I,GAAOI,KAAI,SAACgB,GAEhD,OADApB,EAAMoB,GAAIR,SAAW8I,EAAW1J,EAAMoB,GAAIoH,KACnCxI,EAAMoB,MAGX0I,EAAc,EAChBC,EAAe,EACjBF,EAAkBtB,SAAQ,SAAClI,GACrBA,EAAKO,SAASG,OAASU,EACzBsI,GAAgB1J,EAAKW,MAErB8I,GAAezJ,EAAKW,SAGxB,IAAMgJ,EAA4B5B,EAChCyB,EACApI,GAEIwI,EAA2B7B,EAC/ByB,EACArI,GAEF,OACE,eAAC,IAAMiF,SAAP,WACE,yBAAQtG,UAAU,aAAlB,UACE,qBAAKA,UAAU,kCAAf,SACE,qBAAK+J,IAAKC,EAAMhK,UAAU,WAAWiK,IAAI,WAE3C,sBAAKjK,UAAU,MAAf,UACE,qBAAKA,UAAU,MAAf,SACE,cAAC,EAAD,CACEoC,KAAMoH,EAAYpH,KAClBE,MAAOkH,EAAYlH,MACnBwC,SAAUN,KAAKsE,eAGnB,qBAAK9I,UAAU,MAAf,SACE,cAAC,EAAD,CAAYqD,OAAQsG,EAAarG,QAASsG,YAIhD,sBAAK5J,UAAU,yBAAf,UACGyJ,GAAa,cAAC,EAAD,KACZA,GACA,eAAC,IAAMnD,SAAP,WACE,eAAC,EAAD,CAAMR,YAAa,EAAGE,YAAaxB,KAAKqE,WAAxC,UACE,eAAC,EAAD,WACE,cAAC,IAAD,CACE7I,UAAU,sBACVG,SAAS,OACTI,MAAO,UACPC,KAAM,cALV,8BASA,eAAC,EAAD,WACE,cAAC,IAAD,CACER,UAAU,sBACVG,SAAS,OACTI,MAAO,UACPC,KAAM,YALV,iCAUF,cAAC,EAAD,CAAWO,QAASyD,KAAKwE,aACxBJ,IAAYzH,GACX,cAAC,EAAD,CACEtB,MAAO6J,EACP5J,aAAc0E,KAAK0E,WACnBnJ,aAAcyE,KAAK4E,aAGtBR,IAAYxH,GACX,eAAC,IAAMkF,SAAP,WACE,cAAC,EAAD,CACES,aAAc8C,EACdlJ,MAAO,eACP+G,MAAO,IACPC,OAAQ,MAEV,cAAC,EAAD,CACEZ,aAAc+C,EACdnJ,MAAO,eACP+G,MAAO,IACPC,OAAQ,sBAjH5B,GAA0BhC,iBA6HXuE,cAAW3D,EAAYoC,IC1JjBwB,E,4MACnBC,eAAiB,SAAC1F,EAAOjE,GACvB,EAAK+C,MAAM6G,iBAAiB5J,GAC5BiE,EAAMC,kB,uDAGE,IAAD,SACkCH,KAAKhB,MAAtC+F,EADD,EACCA,WAAYe,EADb,EACaA,iBACdC,EAAqBD,GAAoBA,EAAiBrJ,GAChE,OACE,qBAAKjB,UAAU,6BAAf,SACE,qBAAKA,UAAU,MAAf,SACGuJ,EAAWtJ,KAAI,SAACQ,EAAU8E,GACzB,IAAMiF,EAAa/J,EAASQ,KAAOsJ,EAAsBtH,EAAeA,EAClEwH,EAAahK,EAASQ,KAAOsJ,EAAsBtH,EAAcA,EACjEmD,EACNmE,GAAsBA,IAAuB9J,EAASQ,GAChD,6BACA,sBACN,OACE,qBACEjB,UAAWoG,EAEXrF,QAAS,SAAA2D,GAAU,EAAK0F,eAAe1F,EAAOjE,IAHhD,SAKE,cAAC,IAAD,CACET,UAAU,iBACVG,SAAS,OACTC,MAAO,CAAEC,gBAAiBoK,EAAWnK,QAAS,OAC9CC,MAAOiK,EACPhK,KAAMC,EAASC,YARZ6E,c,GAtBuBI,iBCEvB+E,G,4MASnBxG,MAAQ,CACNyG,cAAc,EACdC,aAAc,I,EAEhBC,WAAa,SAACnG,GACZA,EAAMC,iBADgB,MAES,EAAKnB,MAA5BtD,EAFc,EAEdA,KAAM4K,EAFQ,EAERA,aAERC,IAAa7K,EAAKe,GAClBJ,EAAuC,EAA/B,EAAKmK,WAAW1C,MAAM2C,OAC9BnK,EAAO,EAAKoK,UAAU5C,MAAM2C,OAC5BtK,EAAQ,EAAKwK,WAAW7C,MAAM2C,OAChCpK,GAASC,GAAQH,EACfE,EAAQ,EACV,EAAKmD,SAAS,CACZ2G,cAAc,EACdC,aAAc,sDAEPpI,EAAY1B,IAMrB,EAAKkD,SAAS,CACZ2G,cAAc,EACdC,aAAc,KAGdE,EADEC,EACW,2BAAK7K,GAAN,IAAYS,QAAOE,QAAOC,SAEzB,CAAEH,QAAOE,QAAOC,QAFiBiK,IAVhD,EAAK/G,SAAS,CACZ2G,cAAc,EACdC,aAAc,iEAclB,EAAK5G,SAAS,CACZ2G,cAAc,EACdC,aAAc,4D,uDAKV,IAAD,SACwBpG,KAAKhB,MAAMtD,KAAlCS,EADD,EACCA,MAAOG,EADR,EACQA,KAAMD,EADd,EACcA,MACrB,OACE,uBACEuK,SAAU,SAAC1G,GAET,EAAKmG,WAAWnG,IAElB2G,YAAU,EALZ,UAOE,sBAAKrL,UAAU,aAAf,UACE,uBAAOsL,QAAQ,QAAf,2BACA,uBACE1K,KAAK,OACLZ,UAAU,eACViB,GAAG,QACHsK,YAAY,iCACZC,aAAc7K,EACduE,IAAK,SAACuG,GACJ,EAAKN,WAAaM,QAIxB,sBAAKzL,UAAU,aAAf,UACE,uBAAOsL,QAAQ,QAAf,2BACA,uBACE1K,KAAK,SACLZ,UAAU,eACViB,GAAG,QACHsK,YAAY,iCACZC,aAAc3K,EACdqE,IAAK,SAACuG,GACJ,EAAKT,WAAaS,QAIxB,sBAAKzL,UAAU,aAAf,UACE,uBAAOsL,QAAQ,OAAf,2BACA,uBACE1K,KAAK,OACLZ,UAAU,eACViB,GAAG,OACHsK,YAAY,iCACZC,aAAc1K,EACdoE,IAAK,SAACuG,GACJ,EAAKP,UAAYO,QAIvB,wBAAQ7K,KAAK,SAASZ,UAAU,uBAAhC,0BAGA,wBACEA,UAAU,oBACVe,QAASyD,KAAKhB,MAAMkI,eAFtB,2BAMGlH,KAAKN,MAAMyG,cACZ,qBAAK3K,UAAU,0BAA0B2L,KAAK,QAA9C,SACGnH,KAAKN,MAAM0G,sB,GA/GejF,iBAAlB+E,GAMZxJ,aAAe,CACpBhB,KAAM,ICJV,IAAM8H,GAAW,CAAC1G,EAAcD,GAEnBuK,GAAb,kDACE,WAAYpI,GAAQ,IAAD,uBACjB,cAAMA,IAoBRuC,UAAY,SAACR,GACX,EAAKvB,SAAS,CACZ6H,YAAa7D,GAASzC,MAvBP,EA0BnBuG,aAAe,WACb,EAAKtI,MAAMyF,QAAQV,KAAK,MA3BP,EA6BnBwD,WAAa,SAAC7L,EAAM8L,GACb,EAAK9H,MAAMoG,mBAGX0B,EASH,EAAKxI,MAAMmD,QACRsF,WAAW/L,EAAM,EAAKgE,MAAMoG,iBAAiBrJ,IAC7CiL,MAAK,WACJ,EAAK1I,MAAMyF,QAAQV,KAAK,QAV5B,EAAK/E,MAAMmD,QACRqC,WAAW9I,EAAM,EAAKgE,MAAMoG,iBAAiBrJ,IAC7CiL,MAAK,WACJ,EAAK1I,MAAMyF,QAAQV,KAAK,UAtCb,EAiDnB+B,iBAAmB,SAAC7J,GAClB,EAAKuD,SAAS,CACZsG,iBAAkB7J,KAnDH,MAEa+C,EAAMoD,KAA5B2C,EAFS,EAETA,WAAY1J,EAFH,EAEGA,MACZoB,EAAOuC,EAAMd,MAAMyJ,OAAnBlL,GAHS,OAIjB,EAAKiD,MAAQ,CACX2H,YACG5K,GAAMpB,EAAMoB,GAAOsI,EAAW1J,EAAMoB,GAAIoH,KAAKzH,KAAOU,EACvDgJ,iBAAmBrJ,GAAMpB,EAAMoB,GAAOsI,EAAW1J,EAAMoB,GAAIoH,KAAO,MAPnD,EADrB,gEAWuB,IAAD,OACVpH,EAAOuD,KAAKhB,MAAMd,MAAMyJ,OAAxBlL,GACRuD,KAAKhB,MAAMmD,QAAQyF,YAAYnL,GAAIiL,MAAK,SAACtF,GAAU,IACzCyF,EAAyBzF,EAAzByF,SAAU9C,EAAe3C,EAAf2C,WAClB,EAAKvF,SAAS,CACZ6H,YACG5K,GAAMoL,EAAY9C,EAAW8C,EAAShE,KAAKzH,KAAOU,EACrDgJ,iBAAmBrJ,GAAMoL,EAAY9C,EAAW8C,EAAShE,KAAO,YAlBxE,+BAuDY,IACAzB,EAASpC,KAAKhB,MAAdoD,KACA/G,EAAsB+G,EAAtB/G,MAAO0J,EAAe3C,EAAf2C,WAFR,EAGmC/E,KAAKN,MAAvC2H,EAHD,EAGCA,YAAavB,EAHd,EAGcA,iBACbrJ,EAAOuD,KAAKhB,MAAMd,MAAMyJ,OAAxBlL,GACFoL,EAAWpL,GAAMpB,EAAMoB,GAAMpB,EAAMoB,GAAM,GACzCqL,EAAmB9D,OAAOC,KAAKc,GAClCpB,QAAO,SAAClH,GAAD,OAAQsI,EAAWtI,GAAIL,OAASiL,KACvC5L,KAAI,SAACgB,GAAD,OAAQsI,EAAWtI,MACpBsL,EAAWvE,GAASwE,WAAU,SAACC,GAAD,OAAUA,IAASZ,KACvD,OACE,sBACE7L,UAAU,qCACVI,MAAO,CAAEsM,WAAY,QAFvB,UAIE,eAAC,EAAD,CAAM5G,YAAayG,EAAUvG,YAAaxB,KAAKuB,UAA/C,UACE,cAAC,EAAD,2BACA,cAAC,EAAD,8BAEF,cAAC,EAAD,CACEuE,iBAAkBA,EAClBf,WAAY+C,EACZjC,iBAAkB7F,KAAK8F,mBAEzB,cAAC,GAAD,CACEpK,KAAMmM,EACNvB,aAActG,KAAKuH,WACnBL,eAAgBlH,KAAKsH,gBAErBtH,KAAKN,MAAMoG,kBACX,qBAAKtK,UAAU,0BAA0B2L,KAAK,QAA9C,SACG,4CAtFb,GAA4BhG,iBA6FbuE,eAAW3D,EAAYqF,K,oBC/FzBnF,GAAarC,IAAMuI,gBAqJjBC,G,kDAnJb,WAAYpJ,GAAQ,IAAD,uBACjB,cAAMA,IACDU,MAAQ,CAEXrE,MAAO,GACP0J,WAAY,GACZE,WAAW,EACXD,YAAavH,EAAoB,eAEnC,IAAM4K,EAAc,SAACC,GACnB,OAAO,WAKL,OAJA,EAAK9I,SAAS,CACZyF,WAAW,IAGNqD,EAAE,WAAF,eAfM,OAkBjB,EAAKnG,QAAU,CACb2C,cAAeuD,EAAW,sBAAC,sCAAAE,EAAA,6DACjBvD,EAAgB,EAAKtF,MAArBsF,YACFwD,EAFmB,+BAEsBxD,EAAYpH,KAFlC,YAE0CoH,EAAYlH,MAFtD,yCAGH2K,QAAQC,IAAI,CAChCC,KAAMC,IAAI,eACVD,KAAMC,IAAIJ,KALa,cAGnBK,EAHmB,qBAOGA,EAPH,GAOlB9D,EAPkB,KAON1J,EAPM,KAQzB,EAAKmE,SAAS,CACZnE,MAAOqD,EAAYrD,EAAM+G,MACzB2C,WAAYrG,EAAYqG,EAAW3C,MACnC6C,WAAW,IAXY,kBAalB5J,GAbkB,4CAe3BuM,YAAaS,EAAW,uCAAC,WAAO5L,GAAP,qCAAA8L,EAAA,+DACO,EAAK7I,MAA3BrE,EADe,EACfA,MAAO0J,EADQ,EACRA,WACX+D,EAAa,GACsB,IAAnC9E,OAAOC,KAAKc,GAAY3B,QAC1B0F,EAAW/E,KAAK4E,KAAMC,IAAI,gBAGtBG,EAAqB/E,OAAOC,KAAK5I,GAAO2N,QAAQvM,IAAO,EACzDA,IAAOsM,IACHE,EADuB,iBACExM,GAC/BqM,EAAW/E,KAAK4E,KAAMC,IAAIK,KAVL,SAYqBR,QAAQC,IAAII,GAZjC,0CAYhBI,EAZgB,KAYGrB,EAZH,KAajBsB,EAAkBD,EACpBxK,EAAYwK,EAAkB9G,MAC9B2C,EACEqE,EAAYvB,EAAWA,EAASzF,KAAM/G,EAAMoB,GAC9CA,EACF,EAAK+C,SAAS,CACZuF,WAAYoE,EACZlE,WAAW,EACX5J,MAAM,2BAAM,EAAKqE,MAAMrE,OAAlB,kBAA0BoB,EAAK2M,MAGtC,EAAK5J,SAAS,CACZuF,WAAYoE,EACZlE,WAAW,IA1BQ,kBA6BhB,CACLF,WAAYoE,EACZtB,SAAUuB,IA/BW,4CAAD,uDAkCxB7E,eAAgB8D,EAAW,uCAAC,WAAOzK,EAAME,GAAb,iBAAAyK,EAAA,6DACpBC,EADoB,+BACqB5K,EADrB,YAC6BE,EAD7B,yCAEN6K,KAAMC,IAAIJ,GAFJ,cAEpBnN,EAFoB,OAG1B,EAAKmE,SAAS,CACZnE,MAAOqD,EAAYrD,EAAM+G,MACzB4C,YAAa,CAAEpH,OAAME,SACrBmH,WAAW,IANa,kBAQnB5J,GARmB,2CAAD,yDAU3BuJ,WAAYyD,EAAW,uCAAC,WAAO3M,GAAP,iBAAA6M,EAAA,sEACGI,KAAMU,OAAN,iBAAuB3N,EAAKe,KAD/B,cAChBmI,EADgB,cAEhB0E,EAAWC,KAAKC,MAAMD,KAAKE,UAAU,EAAK/J,MAAMrE,SACtCK,EAAKe,IACrB,EAAK+C,SAAS,CACZnE,MAAOiO,EACPrE,WAAW,IANS,kBAQfL,GARe,2CAAD,uDAUvBJ,WAAY6D,EAAW,uCAAC,WAAOjG,EAAMsH,GAAb,mBAAAnB,EAAA,6DAChBoB,EbnDL,IAAMC,KAAKC,SAASC,SAAS,IAAIC,OAAO,EAAE,GaoDrCC,EAAYvM,EAAoB2E,EAAK9F,MAC3C8F,EAAK6H,cAAL,UAAwBD,EAAUpM,KAAlC,YAA0CoM,EAAUlM,OACpDsE,EAAK8H,UAAY,IAAIvM,KAAKyE,EAAK9F,MAAMgC,UAJf,SAKAqK,KAAMwB,KAAK,SAAX,2BACjB/H,GADiB,IAEpB3F,GAAIkN,EACJ9F,IAAK6F,KARe,cAKhBU,EALgB,OAUtB,EAAK5K,SAAS,CACZnE,MAAM,2BAAM,EAAKqE,MAAMrE,OAAlB,kBAA0BsO,EAAQS,EAAQhI,OAC/C6C,WAAW,IAZS,kBAcfmF,EAAQhI,MAdO,2CAAD,yDAgBvBqF,WAAYY,EAAW,uCAAC,WAAO3M,EAAM2O,GAAb,iBAAA9B,EAAA,6DAChB+B,EADgB,2BAEjB5O,GAFiB,IAGpBmI,IAAKwG,EACLH,UAAW,IAAIvM,KAAKjC,EAAKY,MAAMgC,YAJX,SAMIqK,KAAM4B,IAAN,iBAAoB7O,EAAKe,IAAM6N,GANnC,cAMhBE,EANgB,OAOtB,EAAKhL,SAAS,CACZnE,MAAM,2BACD,EAAKqE,MAAMrE,OADX,kBAEFmP,EAAYpI,KAAK3F,GAAK+N,EAAYpI,OAErC6C,WAAW,IAZS,kBAgBfuF,EAAYpI,MAhBG,2CAAD,0DAxGR,E,qDA8HjB,OACE,cAACH,GAAWwI,SAAZ,CACE3G,MAAO,CACLpE,MAAOM,KAAKN,MACZyC,QAASnC,KAAKmC,SAHlB,SAME,cAAC,IAAD,UACE,qBAAK3G,UAAU,MAAf,SACE,sBAAKA,UAAU,iBAAf,UAEE,cAAC,IAAD,CAAOkP,KAAK,IAAIC,OAAK,EAACC,UAAWzG,IACjC,cAAC,IAAD,CAAOuG,KAAK,UAAUE,UAAWxD,KACjC,cAAC,IAAD,CAAOsD,KAAK,YAAYE,UAAWxD,kB,GA5I/BjG,iBCLlB0J,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFjL,SAASkL,eAAe,W","file":"static/js/main.d4f8c39f.chunk.js","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React from 'react'\nimport Ionicon from 'react-ionicons'\nimport PropTypes from 'prop-types'\nconst PriceList = ({ items, onModifyItem, onDeleteItem }) => {\n  return (\n    <ul className=\"list-group list-group-flush\">\n      {items.map((item) => (\n        <li\n          className=\"list-group-item d-flex justify-content-between align-items-center\"\n          key={item.id}\n        >\n          <span className=\"col-1\">\n            <Ionicon \n              className=\"rounded-circle\"\n              fontSize=\"30px\"\n              style={{backgroundColor: '#007bff', padding: '5px'}}\n              color={'#fff'}\n              icon={item.category.iconName}\n            />\n          </span>\n          <span className=\"col-5\">{item.title}</span>\n          <span className=\"col-2 font-weight-bold\">\n            {item.category.type === 'income' ? '+' : '-'}\n            {item.price}元\n          </span>\n          <span className=\"col-2\">{item.date}</span>\n          <a\n            className=\"col-1\"\n            onClick={() => {\n              onModifyItem(item)\n            }}\n          >\n            <Ionicon \n              className=\"rounded-circle\"\n              fontSize=\"30px\"\n              style={{backgroundColor: '#28a745', padding: '5px', cursor:'pointer'}}\n              color={'#fff'}\n              icon={'ios-create-outline'}\n            />\n          </a>\n          <a\n            className=\"col-1\"\n            onClick={() => {\n              onDeleteItem(item)\n            }}\n          >\n            <Ionicon \n              className=\"rounded-circle\"\n              fontSize=\"30px\"\n              style={{backgroundColor: '#dc3545', padding: '5px',cursor:'pointer'}}\n              color={'#fff'}\n              icon={'ios-close'}\n            />\n          </a>\n        </li>\n      ))}\n    </ul>\n  )\n}\nPriceList.propTypes = {\n  items: PropTypes.array.isRequired,\n  onModifyItem: PropTypes.func.isRequired,\n  onDeleteItem: PropTypes.func.isRequired\n}\nPriceList.defaultProps = {\n  onDeleteItem: () => {},\n  onModifyItem: () => {}\n}\nexport default PriceList\n","export const LIST_VIEW = 'list'\nexport const CHART_VIEW = 'chart'\nexport const TYPE_INCOME = 'income'\nexport const TYPE_OUTCOME = 'outcome'\n\nexport const padLeft = (n) => {\n  return n < 10 ? '0' + n : n\n}\nexport const range = (size, startAt = 0) => {\n  const arr = []\n  for (let i = 0; i < size; i++) {\n    arr[i] = startAt + i   \n  }\n  return arr\n}\nexport const getState = (defaultNum, selectNum) => {\n  return defaultNum === selectNum ? 'dropdown-item active' : 'dropdown-item'\n}\nexport const parseToYearAndMonth = (str) => {\n  const date = str ? new Date(str) : new Date()\n  return {\n    year: date.getFullYear(),\n    month: date.getMonth() + 1\n  }\n}\nexport const isValidDate = (dateString) => {\n  const regEx = /^\\d{4}-\\d{2}-\\d{2}$/;\n  if(!dateString.match(regEx)) return false;  // Invalid format\n  const d = new Date(dateString);\n  if(Number.isNaN(d.getTime())) return false; // Invalid date\n  return d.toISOString().slice(0,10) === dateString;\n}\nexport const Colors = {\n  blue: '#347eff',\n  deepBlue: '#61dafb',\n  green: '#28a745',\n  red: '#dc3545',\n  gray: '#555',\n  lightGray: '#efefef',\n  white: '#fff',\n}\nexport const flatternArr = (arr) => {\n  return arr.reduce((map, item) => {\n    map[item.id] = item\n    return map\n  }, {})\n}\nexport const ID = () => {\n  return '_' + Math.random().toString(36).substr(2,9)\n}","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst TotalPrice = ({ income, outcome }) => (\n  <div className=\"row\">\n    <div className=\"col\">\n      <h5 className=\"income\">\n        收入：<span>{income}元</span>\n      </h5>\n    </div>\n    <div className=\"col\">\n      <h5 className=\"outcome\">\n        支出：<span>{outcome}元</span>\n      </h5>\n    </div>    \n  </div>\n)\n\nTotalPrice.propTypes = {\n  income: PropTypes.number.isRequired,\n  outcome: PropTypes.number.isRequired\n}\nTotalPrice.defaultProps = {\n  income: 0,\n  outcome: 0\n}\nexport default TotalPrice\n","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport PropTypes from 'prop-types'\nimport React, { PureComponent } from 'react'\nimport { getState, padLeft, range } from '../utility'\nclass MonthPicker extends PureComponent {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isOpen: false,\n      selectedYear: props.year\n    }\n    this.monthPickerRef = React.createRef()\n  }\n  documentClickHandler = (e) => {\n    // 判断当前点击的元素中是否包含 MonthPicker\n    const currentClick = e.target\n    const monthPicker = this.monthPickerRef.current\n    const flag = monthPicker.contains(currentClick)\n    //如果包含则进行关闭\n    !flag && this.setState({ isOpen: false })\n  }\n  componentDidMount() {\n    // false =》 冒泡\n    // true =》 捕获\n    document.addEventListener('click', this.documentClickHandler, false)\n  }\n  componentWillUnmount() {\n    document.removeEventListener('click', this.documentClickHandler, false)\n  }\n  toggleDropdown(event) {\n    event.preventDefault()\n    this.setState({\n      isOpen: !this.state.isOpen,\n      selectedYear: this.props.year,\n    })\n  }\n  selectYear(event, yearNumber) {\n    event.preventDefault()\n    this.setState({\n      selectedYear: yearNumber,\n    })\n  }\n  selectMonth(event, monthNumber) {\n    event.preventDefault()\n    this.setState({\n      isOpen: false,\n    })\n    this.props.onChange(this.state.selectedYear, monthNumber)\n  }\n  render() {\n    const { year, month } = this.props\n    const { isOpen, selectedYear } = this.state\n    const monthRange = range(12, 1)\n    const yearRange = range(9, -4).map((number) => number + year)\n    return (\n      <div\n        className=\"dropdown month-picker-component\"\n        ref={this.monthPickerRef}\n      >\n        <span style={{fontSize:'18px', fontWeight: 700, marginRight: '20px'}}>选择月份 :</span> \n        <button\n          className=\"btn  btn-secondary dropdown-toggle\"\n          onClick={(e) => {\n            this.toggleDropdown(e)\n          }}\n        >\n          {`${year}年 ${padLeft(month)}月`}\n        </button>\n        {/* 下拉菜单 */}\n        {isOpen && (\n          <div className=\"dropdown-menu\" style={{ display: 'block' }}>\n            <div className=\"row\">\n              <div className=\"col border-right years-range\">\n                {yearRange.map((yearNumber, index) => (\n                  <a\n                    key={index}\n                    href=\"#\"\n                    className={getState(yearNumber, selectedYear)}\n                    onClick={(event) => this.selectYear(event, yearNumber)}\n                  >\n                    {yearNumber} 年\n                  </a>\n                ))}\n              </div>\n              <div className=\"col months-range\">\n                {monthRange.map((monthNumber, index) => (\n                  <a\n                    onClick={(event) => this.selectMonth(event, monthNumber)}\n                    key={index}\n                    href=\"#\"\n                    className={getState(monthNumber, month)}\n                  >\n                    {padLeft(monthNumber)} 月\n                  </a>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  }\n}\nMonthPicker.propTypes = {\n  year: PropTypes.number.isRequired,\n  month: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n}\nexport default MonthPicker\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Ionicon from 'react-ionicons'\n\nconst CreateBtn = ({ onClick }) => (\n  <button\n    className=\"btn btn-primary btn-block d-flex justify-content-center align-items-center\" \n    onClick={(e) => {onClick()}}\n  >\n    <Ionicon\n      className=\"rounded-circle\" \n      fontSize=\"30px\"\n      color='#fff'\n      icon='ios-add-circle'\n    />\n    创建一条新的记账记录\n  </button>\n)\n\nCreateBtn.propTypes = {\n  onClick: PropTypes.func.isRequired,\n}\nexport default CreateBtn","export default __webpack_public_path__ + \"static/media/logo.42627872.svg\";","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nexport class Tabs extends PureComponent {\n  static propTypes = {\n    activeIndex: PropTypes.number.isRequired,\n    onTabChange: PropTypes.func.isRequired,\n  }\n  state = {\n    activeIndex: this.props.activeIndex,\n  }\n  tabChange = (event, index) => {\n    event.preventDefault()\n    this.setState({\n      activeIndex: index\n    })\n    this.props.onTabChange(index)\n  }\n  render() {\n    const { children } = this.props\n    const { activeIndex } = this.state\n    return (\n      <div>\n        <ul className=\"nav nav-tabs nav-fill my-4\">\n          {React.Children.map(children, (child, index) => {\n            const activeClassName =\n              activeIndex === index ? 'nav-link active' : 'nav-link'\n            return (\n              <li className=\"nav-item\">\n                <a\n                  href=\"#\"\n                  className={activeClassName}\n                  onClick={(event) => this.tabChange(event, index)}\n                >\n                  {child}\n                </a>\n              </li>\n            )\n          })}\n        </ul>\n      </div>\n    )\n  }\n}\n\nexport const Tab = ({ children }) => <React.Fragment>{children}</React.Fragment>\n","import React from 'react'\nimport { AppContext } from './App'\nconst withContext = (Component) => {\n  return (props) => (\n    <AppContext.Consumer>\n      {({ state, actions }) => {\n        return <Component {...props} data={state} actions={actions} />\n      }}\n    </AppContext.Consumer>\n  )\n}\nexport default withContext\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport * as Echarts from 'echarts'\n\nexport default class CustomPieChart extends PureComponent {\n  render() {\n    const { title, categoryData, width, height } = this.props\n\n    if (categoryData.length === 0) {\n      return <h3 className=\"text-center mx-3\"> {title} 还没有任何数据</h3>\n    }\n    return (\n      <div className=\"pie-chart-component\">\n        <h3 className=\"text-center mt-3\">{title}</h3>\n        <div className=\"pie-chart\" style={{ width, height,marginLeft: 'auto', marginRight:'auto'}} ref={(ref) => this.PieChartRef = ref}></div>\n      </div>\n    )\n  }\n  static propTypes = {\n    title: PropTypes.string,\n    categoryData: PropTypes.array,\n    width: PropTypes.number,\n    height: PropTypes.number\n  }\n  static defaultProps = {\n    title: '',\n    categoryData: [],\n    width: 400,\n    height: 400\n  }\n  componentDidMount() {\n    const { categoryData } = this.props\n    if (categoryData.length !== 0) {\n      this.drawPieChart()\n    }\n  }\n  drawPieChart = () => {\n    const { categoryData, title } = this.props\n    // 基于准备好的dom，初始化echarts实例\n    const myChart = Echarts.init(this.PieChartRef)\n    // 指定图表的配置项和数据\n    const option = {\n      tooltip: {},\n      legend: {},\n      series: [\n        {\n          name: title,\n          type: 'pie',\n          radius: [30, 110],\n          center: ['55%', '50%'],\n          // roseType: 'area',\n          data: categoryData\n        },\n      ],\n    }\n\n    // 使用刚指定的配置项和数据显示图表。\n    myChart.setOption(option)\n  }\n}\n","import React from 'react'\nimport Ionicon from 'react-ionicons'\nimport { Colors } from '../utility'\n\nconst Loader = () => (\n  <div className=\"loading-component text-center\">\n    <Ionicon \n      icon=\"ios-refresh\"\n      fontSize=\"40px\"\n      color={Colors.blue}\n      rotate={true}\n    />\n    <h5>加载中...</h5>\n  </div>\n)\nexport default Loader ","import React, { PureComponent } from 'react'\nimport PriceList from '../components/PriceList'\nimport Ionicon from 'react-ionicons'\nimport { LIST_VIEW, CHART_VIEW, TYPE_OUTCOME, TYPE_INCOME } from '../utility'\nimport TotalPrice from '../components/TotalPrice'\nimport MonthPicker from '../components/MonthPicker'\nimport CreateBtn from '../components/CreateBtn'\nimport logo from '../logo.svg'\nimport { Tabs, Tab } from '../components/Tabs'\nimport withContext from '../WithContext'\nimport PieChart from '../components/PieChart'\nimport { withRouter } from 'react-router-dom'\nimport Loader from '../components/loader'\nconst tabsText = [LIST_VIEW, CHART_VIEW]\nconst generateChartDataByCategory = (items, type = TYPE_INCOME) => {\n  let categoryMap = {}\n  items\n    .filter((item) => item.category.type === type)\n    .forEach((item) => {\n      if (categoryMap[item.cid]) {\n        categoryMap[item.cid].value += item.price * 1\n        categoryMap[item.cid].items.push(item.id)\n      } else {\n        categoryMap[item.cid] = {\n          name: item.category.name,\n          value: item.price * 1,\n          items: [item.id],\n        }\n      }\n    })\n  return Object.keys(categoryMap).map((mapKey) => ({ ...categoryMap[mapKey] }))\n}\nexport class Home extends PureComponent {\n  state = {\n    tabView: LIST_VIEW,\n  }\n  componentDidMount() {\n    this.props.actions.getInitalData()\n  }\n  changeView = (index) => {\n    this.setState({ tabView: tabsText[index] })\n  }\n  changeDate = (year, month) => {\n    this.props.actions.selectNewMonth(year, month)\n  }\n  createItem = () => {\n    this.props.history.push('/create')\n  }\n  modifyItem = (modifiedItem) => {\n    this.props.history.push(`/edit/${modifiedItem.id}`)\n  }\n  deleteItem = (deletedItem) => {\n    this.props.actions.deleteItem(deletedItem)\n  }\n\n  render() {\n    const { data } = this.props\n    const { items, categories, currentDate, isLoading } = data\n    const { tabView } = this.state\n    // 把items和category给链接起来 生成新的数据\n    const itemsWithCategory = Object.keys(items).map((id) => {\n      items[id].category = categories[items[id].cid]\n      return items[id]\n    })\n\n    let totalIncome = 0,\n      totalOutcome = 0\n    itemsWithCategory.forEach((item) => {\n      if (item.category.type === TYPE_OUTCOME) {\n        totalOutcome += item.price\n      } else {\n        totalIncome += item.price\n      }\n    })\n    const chartOutcomDataByCategory = generateChartDataByCategory(\n      itemsWithCategory,\n      TYPE_OUTCOME\n    )\n    const chartIncomDataByCategory = generateChartDataByCategory(\n      itemsWithCategory,\n      TYPE_INCOME\n    )\n    return (\n      <React.Fragment>\n        <header className=\"App-header\">\n          <div className=\"row mb-5 justify-content-center\">\n            <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          </div>\n          <div className=\"row\">\n            <div className=\"col\">\n              <MonthPicker\n                year={currentDate.year}\n                month={currentDate.month}\n                onChange={this.changeDate}\n              />\n            </div>\n            <div className=\"col\">\n              <TotalPrice income={totalIncome} outcome={totalOutcome} />\n            </div>\n          </div>\n        </header>\n        <div className=\"content-area py-3 px-3\">\n          {isLoading && <Loader />}\n          {!isLoading && (\n            <React.Fragment>\n              <Tabs activeIndex={0} onTabChange={this.changeView}>\n                <Tab>\n                  <Ionicon\n                    className=\"rounded-circle mr-2\"\n                    fontSize=\"25px\"\n                    color={'#007bff'}\n                    icon={'ios-paper'}\n                  />\n                  列表模式\n                </Tab>\n                <Tab>\n                  <Ionicon\n                    className=\"rounded-circle mr-2\"\n                    fontSize=\"25px\"\n                    color={'#007bff'}\n                    icon={'ios-pie'}\n                  />\n                  图表模式\n                </Tab>\n              </Tabs>\n              <CreateBtn onClick={this.createItem} />\n              {tabView === LIST_VIEW && (\n                <PriceList\n                  items={itemsWithCategory}\n                  onModifyItem={this.modifyItem}\n                  onDeleteItem={this.deleteItem}\n                />\n              )}\n              {tabView === CHART_VIEW && (\n                <React.Fragment>\n                  <PieChart\n                    categoryData={chartOutcomDataByCategory}\n                    title={'支出'}\n                    width={400}\n                    height={400}\n                  />\n                  <PieChart\n                    categoryData={chartIncomDataByCategory}\n                    title={'收入'}\n                    width={400}\n                    height={400}\n                  />\n                </React.Fragment>\n              )}\n            </React.Fragment>\n          )}\n        </div>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default withRouter(withContext(Home))\n","import React, { PureComponent } from 'react'\nimport Ionicon from 'react-ionicons'\nimport {Colors} from '../utility'\nexport default class CategorySelect extends PureComponent {\n  selectCategory = (event, category) => {\n    this.props.onSelectCategory(category)\n    event.preventDefault()\n  }\n  \n  render() {\n    const { categories, selectedCategory } = this.props\n    const selectedCategoryId = selectedCategory && selectedCategory.id\n    return (\n      <div className=\"category-select-component \">\n        <div className=\"row\">\n          {categories.map((category, index) => {\n            const iconColor = (category.id === selectedCategoryId) ? Colors.white : Colors.gray\n            const backColor = (category.id === selectedCategoryId) ? Colors.blue : Colors.lightGray\n            const activeClassName =\n            selectedCategoryId && selectedCategoryId === category.id\n                ? 'category-item col-3 active'\n                : 'category-item col-3'\n            return (\n              <div \n                className={activeClassName} \n                key={index}\n                onClick={event => {this.selectCategory(event, category)}}\n              >\n                <Ionicon\n                  className=\"rounded-circle\"\n                  fontSize=\"50px\"\n                  style={{ backgroundColor: backColor, padding: '5px' }} \n                  color={iconColor}\n                  icon={category.iconName}\n                />\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n}\n","import PropTypes from 'prop-types'\nimport { isValidDate } from '../utility'\n\nimport React, { PureComponent } from 'react'\n\nexport default class PriceForm extends PureComponent {\n  static propTypes = {\n    onFormSubmit: PropTypes.func.isRequired,\n    onCancelSubmit: PropTypes.func.isRequired,\n    item: PropTypes.object,\n  }\n  static defaultProps = {\n    item: {},\n  }\n  state = {\n    validatePass: true,\n    errorMessage: '',\n  }\n  sumbitForm = (event) => {\n    event.preventDefault()\n    const { item, onFormSubmit } = this.props\n    // id 转为 bool !!undefined => false !!xxx => true\n    const editMode = !!item.id\n    const price = this.priceInput.value.trim() * 1\n    const date = this.dateInput.value.trim()\n    const title = this.titleInput.value.trim()\n    if (price && date && title) {\n      if (price < 0) {\n        this.setState({\n          validatePass: false,\n          errorMessage: '价格数字必须大于0',\n        })\n      }else if (!isValidDate(date)) {\n        this.setState({\n          validatePass: false,\n          errorMessage: '请填写正确的日期格式'\n        })\n      }else {\n        this.setState({\n          validatePass: true,\n          errorMessage: ''\n        })\n        if (editMode) {\n          onFormSubmit({ ...item, title, price, date }, editMode)\n        } else {\n          onFormSubmit({ title, price, date }, editMode)\n        }\n      }\n    }else{\n      this.setState({\n        validatePass: false,\n        errorMessage: '请输入所有的必选项'\n      })\n    }\n    \n  }\n  render() {\n    const { title, date, price } = this.props.item\n    return (\n      <form\n        onSubmit={(event) => {\n          // event.preventDefault()\n          this.sumbitForm(event)\n        }}\n        noValidate\n      >\n        <div className=\"form-group\">\n          <label htmlFor=\"title\">标题*</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"title\"\n            placeholder=\"请输入标题\"\n            defaultValue={title}\n            ref={(input) => {\n              this.titleInput = input\n            }}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"price\">价格*</label>\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            id=\"price\"\n            placeholder=\"请输入价格\"\n            defaultValue={price}\n            ref={(input) => {\n              this.priceInput = input\n            }}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"date\">日期*</label>\n          <input\n            type=\"date\"\n            className=\"form-control\"\n            id=\"date\"\n            placeholder=\"请输入日期\"\n            defaultValue={date}\n            ref={(input) => {\n              this.dateInput = input\n            }}\n          />\n        </div>\n        <button type=\"submit\" className=\"btn btn-primary mr-3\">\n          提交\n        </button>\n        <button\n          className=\"btn btn-secondary\"\n          onClick={this.props.onCancelSubmit}\n        >\n          取消\n        </button>\n        { !this.state.validatePass &&\n          <div className=\"alert alert-danger mt-5\" role=\"alert\">\n            {this.state.errorMessage}\n          </div>\n        }\n      </form>\n    )\n  }\n}\n","import React, { PureComponent } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport CategorySelect from '../components/CategorySelect'\nimport PriceForm from '../components/PriceForm'\nimport { Tab, Tabs } from '../components/Tabs'\nimport { TYPE_INCOME, TYPE_OUTCOME } from '../utility'\nimport withContext from '../WithContext'\n\nconst tabsText = [TYPE_OUTCOME, TYPE_INCOME]\n\nexport class Create extends PureComponent {\n  constructor(props) {\n    super(props)\n    const { categories, items } = props.data\n    const { id } = props.match.params\n    this.state = {\n      selectedTab:\n        (id && items[id]) ? categories[items[id].cid].type : TYPE_OUTCOME,\n      selectedCategory: (id && items[id]) ? categories[items[id].cid] : null,\n    }\n  }\n  componentDidMount() {\n    const { id } = this.props.match.params\n    this.props.actions.getEditData(id).then((data) => {\n      const { editItem, categories } = data\n      this.setState({\n        selectedTab:\n          (id && editItem) ? categories[editItem.cid].type : TYPE_OUTCOME,\n        selectedCategory: (id && editItem) ? categories[editItem.cid] : null,\n      })\n    })\n  }\n  tabChange = (index) => {\n    this.setState({\n      selectedTab: tabsText[index],\n    })\n  }\n  cancelSubmit = () => {\n    this.props.history.push('/')\n  }\n  submitForm = (item, isEditMode) => {\n    if (!this.state.selectedCategory) {\n      return\n    }\n    if (!isEditMode) {\n      // create\n      this.props.actions\n        .createItem(item, this.state.selectedCategory.id)\n        .then(() => {\n          this.props.history.push('/')\n        })\n    } else {\n      // update\n      this.props.actions\n        .updateItem(item, this.state.selectedCategory.id)\n        .then(() => {\n          this.props.history.push('/')\n        })\n    }\n  }\n  selectedCategory = (category) => {\n    this.setState({\n      selectedCategory: category,\n    })\n  }\n  render() {\n    const { data } = this.props\n    const { items, categories } = data\n    const { selectedTab, selectedCategory } = this.state\n    const { id } = this.props.match.params\n    const editItem = id && items[id] ? items[id] : {}\n    const filterCategories = Object.keys(categories)\n      .filter((id) => categories[id].type === selectedTab)\n      .map((id) => categories[id])\n    const tabIndex = tabsText.findIndex((text) => text === selectedTab)\n    return (\n      <div\n        className=\"create-page py-3 px-3 rounded mt-3\"\n        style={{ background: '#fff' }}\n      >\n        <Tabs activeIndex={tabIndex} onTabChange={this.tabChange}>\n          <Tab>支出</Tab>\n          <Tab>收入</Tab>\n        </Tabs>\n        <CategorySelect\n          selectedCategory={selectedCategory}\n          categories={filterCategories}\n          onSelectCategory={this.selectedCategory}\n        />\n        <PriceForm\n          item={editItem}\n          onFormSubmit={this.submitForm}\n          onCancelSubmit={this.cancelSubmit}\n        />\n        {!this.state.selectedCategory && (\n          <div className=\"alert alert-danger mt-5\" role=\"alert\">\n            {'没有选择category'}\n          </div>\n        )}\n      </div>\n    )\n  }\n}\nexport default withRouter(withContext(Create))\n","import './App.css'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport React, { PureComponent } from 'react'\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom'\nimport Home from './containers/Home'\nimport Create from './containers/Create'\nimport { flatternArr, ID, parseToYearAndMonth } from './utility'\nimport axios from 'axios'\nexport const AppContext = React.createContext()\nclass App extends PureComponent {\n  constructor(props) {\n    super(props)\n    this.state = {\n      // 数据扁平化，以id作为key\n      items: {},\n      categories: {},\n      isLoading: false,\n      currentDate: parseToYearAndMonth('2018/12/10'),\n    }\n    const withLoading = (cb) => {\n      return (...args) => {\n        this.setState({\n          isLoading: true,\n        })\n        // 返回一个Promise， 如果不返回 则不能调用then\n        return cb(...args)\n      }\n    }\n    this.actions = {\n      getInitalData: withLoading(async () => {\n        const { currentDate } = this.state\n        const getUrlWithData = `/items?monthCategory=${currentDate.year}-${currentDate.month}&_sort=timestamp&_order=desc`\n        const results = await Promise.all([\n          axios.get('/categories'),\n          axios.get(getUrlWithData),\n        ])\n        const [categories, items] = results\n        this.setState({\n          items: flatternArr(items.data),\n          categories: flatternArr(categories.data),\n          isLoading: false,\n        })\n        return items\n      }),\n      getEditData: withLoading(async (id) => {\n        const { items, categories } = this.state\n        let promiseArr = []\n        if (Object.keys(categories).length === 0) {\n          promiseArr.push(axios.get('/categories'))\n        }\n        // id 是否请求过 》-1说明已经被fetch过\n        const itemAlreadyFetched = Object.keys(items).indexOf(id) > -1\n        if (id && !itemAlreadyFetched) {\n          const getURKWithID = `/items/${id}`\n          promiseArr.push(axios.get(getURKWithID))\n        }\n        const [fecthedCategories, editItem] = await Promise.all(promiseArr)\n        const finalCategories = fecthedCategories\n          ? flatternArr(fecthedCategories.data)\n          : categories\n        const finalItem = editItem ? editItem.data: items[id]\n        if (id) {\n          this.setState({\n            categories: finalCategories,\n            isLoading: false,\n            items: { ...this.state.items, [id]: finalItem },\n          })\n        } else {\n          this.setState({\n            categories: finalCategories,\n            isLoading: false,\n          })\n        }\n        return {\n          categories: finalCategories,\n          editItem: finalItem,\n        }\n      }),\n      selectNewMonth: withLoading(async (year, month) => {\n        const getUrlWithData = `/items?monthCategory=${year}-${month}&_sort=timestamp&_order=desc`\n        const items = await axios.get(getUrlWithData)\n        this.setState({\n          items: flatternArr(items.data),\n          currentDate: { year, month },\n          isLoading: false,\n        })\n        return items\n      }),\n      deleteItem: withLoading(async (item) => {\n        const deleteItem = await axios.delete(`/items/${item.id}`)\n        const newItems = JSON.parse(JSON.stringify(this.state.items))\n        delete newItems[item.id]\n        this.setState({\n          items: newItems,\n          isLoading: false,\n        })\n        return deleteItem\n      }),\n      createItem: withLoading(async (data, categoryId) => {\n        const newId = ID()\n        const parseDate = parseToYearAndMonth(data.date)\n        data.monthCategory = `${parseDate.year}-${parseDate.month}`\n        data.timestamp = new Date(data.date).getTime()\n        const newItem = await axios.post('/items', {\n          ...data,\n          id: newId,\n          cid: categoryId,\n        })\n        this.setState({\n          items: { ...this.state.items, [newId]: newItem.data },\n          isLoading: false,\n        })\n        return newItem.data\n      }),\n      updateItem: withLoading(async (item, updatedCategoryId) => {\n        const updateData = {\n          ...item,\n          cid: updatedCategoryId,\n          timestamp: new Date(item.date).getTime(),\n        }\n        const modifedItem = await axios.put(`/items/${item.id}`, updateData)\n        this.setState({\n          items: {\n            ...this.state.items,\n            [modifedItem.data.id]: modifedItem.data,\n          },\n          isLoading: false,\n        })\n\n        // this.actions.getInitalData()\n        return modifedItem.data\n      }),\n    }\n  }\n\n  render() {\n    return (\n      <AppContext.Provider\n        value={{\n          state: this.state,\n          actions: this.actions,\n        }}\n      >\n        <Router>\n          <div className=\"App\">\n            <div className=\"container pb-5\">\n              {/* exact 是路径完全匹配 */}\n              <Route path=\"/\" exact component={Home} />\n              <Route path=\"/create\" component={Create} />\n              <Route path=\"/edit/:id\" component={Create} />\n            </div>\n          </div>\n        </Router>\n      </AppContext.Provider>\n    )\n  }\n}\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}